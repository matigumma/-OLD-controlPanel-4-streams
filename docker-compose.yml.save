version: '3.3'
services:
  controlpanel:
    container_name: "controlpanel"
    restart: always
    build:
      dockerfile: Dockerfile
      context: .
    command: npm run start
    ports:
      - "3001:3001"
    volumes:
      - ./src:/usr/src/app/src
    depends_on:
      - mongocp

  mongocp:
    image: "mongo"
    container_name: "mongocp"
    restart: always
    command: mongod --port 27018
    environment:
      MONGO_INITDB_ROOT_USERNAME: freewaves
      MONGO_INITDB_ROOT_PASSWORD: fv07
      MONGO_INITDB_DATABASE: freewaves
      MONGO_NON_ROOT_USERNAME: freewuser
      MONGO_NON_ROOT_PASSWORD: fran29141099
    ports:
      - "27018:27018"
    volumes:
      - ./mongo-volume:/data/db

docker run -d -p 27018:27018 --restart=always -e MONGO_INITDB_ROOT_USERNAME="freewuser" -e MONGO_INITDB_ROOT_PASSWORD="fran29141099" -e MONGO_INITDB_DATABASE="freewaves" mongo 
